const LYRICS = `Can you tell me when its cold
Can you tell me you’re sure 

But I like it either way
When its something 

Can you tell when its wrong 
Can you tell its over

But I like it either way
Ill see you another day
Tell me you love this
Tell me you love me

Tell me you hate my songs
Tell me you hate me too
But that’s when I think of you
Can we wake up soon

when its something 
Can we feel it out

you are too consuming 
there may be
One too many
Shoes on your feet now
Pain is nothing it 
all comes down and
they just don’t exist
when you’re around


I want ur neck
In my bed
Gimme me space 
Just Take it
We came up so
I stay here
Cuz we talked too much 
Last year 


She never Cares the 
same way Twice I only Count the steps to 
her place each night


I want ur neck
In my bed
Gimme me space 
Just Take it
We came up so
I stay here
We never Talked 
Last year 

Its different 
My face isn’t mine
around you 
I’m behind your eyes


I slow down and
I slow down and drive
The flashes can’t
Stop you tonight
Its different 
When somethings not right 
I see you and
I can’t close my eyes

All you do is
Wait to call me

Ill treat you better 
but it might kill me

I won’t stop trying 
But i’m scared of crying 
and i’m not your friend so I can’t
get my mind in

You try too hard just
To prove im a liar
But I say too much 
When I am beside her

And you know I really want it
And you know you never call me
But you tell me all your friends 
they Like the way you talk about me

Doesn’t she mean 
something to me
and still she sleeps
On her sheets

when can’t she see
whose involved 
but she don’t want
it solved

You take your time
To take what’s mine 
Oh no

Its hard to watch
harder to leave
She cries too much
On your sleeve

but you gave me 
the room key
But she don’t want
To see me

You take your time
To take what’s mine 
Oh no

Bike to your house
Bike past it first
I can’t call you
When my fingers hurt
But gloves don’t let me
Find your name
And I can’t tell if you missed your train

Its too cold too
Go back to my room
I wanna feel like novemeber

After the last part
My throats messed up
I can’t remember 
What I said enough
So I guess my
Brain is too
And my eyes cuz
I can’t see you 

Weary with toil, I haste me to my bed,
The dear repose for limbs with travel tired;
But then begins a journey in my head,
To work my mind, when body’s work’s expired:
For then my thoughts (from far where I abide)
Intend a zealous pilgrimage to thee,
And keep my drooping eyelids open wide,
Looking on darkness which the blind do see:
Save that my soul’s imaginary sight
Presents thy shadow to my sightless view,
Which, like a jewel hung in ghastly night,
Makes black night beauteous and her old face new.
Lo, thus, by day my limbs, by night my mind,
For thee, and for myself, no quiet find.

I might be sick
I’m feeling nauseous and my mind is going crazy
You twist my spine and wring it out
Infect me, it goes right over my head

I’m asking you to press me down
Take me like I’m gone tomorrow,
I’m dizzy on your name

I’m crashing on your step,
I’m slamming doors and I am screaming out for you,
You make me sick,
You make me sweat

I’m asking you to press me down
Take me like I’m gone tomorrow,
I’m dizzy on your name
 
Keep you somewhere secret,
Trace down my spine,
I’ll sneak a taste
Back of my mind

Tell me where you go
Where they sing my name
Take me,
Do what you want with me

By the grace of god,
I’ll keep it clean
Can’t seem to keep 
You far from me

Back of my room
Where I keep you
Sink me all the way down
Take me ‘til I die

Take my truth
Pledge my demise
Sell my soul,
I’m crucified

Take me, take me, take me,
Let me, Let me, Let me
 
Does it make me dirty
Can you feel my eyes
Does it cross your mind
Stab in your side
Pin me to your secret,
I can tell you mine

Make me scream, tell me to cry,
Touch my arm then look away
Can you look at me,
I’m begging you please
God help me,
I’m begging you please

Can I cross your mind,
Linger on your time
Bursting at my seams,
Can you catch my eyes 

Hail mary,
Hail for me
Bring me to my knees
Bring me to silence
Bring me to peace

Pray for me
Think of me
Bring me to my knees
Bring me to silence 
Bring me to peace

Shall I compare thee to a summer’s day?
Thou art more lovely and more temperate.
Rough winds do shake the darling buds of May,
And summer’s lease hath all too short a date.
Sometime too hot the eye of heaven shines,
And often is his gold complexion dimmed;
And every fair from fair sometime declines,
By chance or nature’s changing course untrimmed.
But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow’st,
Nor shall Death brag thou wand’rest in his shade,
When in eternal lines to time thou grow’st.
So long as men can breathe or eyes can see,
So long lives this, and this gives life to thee.

Come gather 'round people
Wherever you roam
And admit that the waters
Around you have grown
And accept it that soon
You'll be drenched to the bone
If your time to you is worth savin'
And you better start swimmin'
Or you'll sink like a stone
For the times they are a-changin'
Come writers and critics
Who prophesize with your pen
And keep your eyes wide
The chance won't come again
And don't speak too soon
For the wheel's still in spin
And there's no tellin' who
That it's namin'
For the loser now
Will be later to win
For the times they are a-changin'
Come senators, congressmen
Please heed the call
Don't stand in the doorway
Don't block up the hall
For he that gets hurt
Will be he who has stalled
The battle outside ragin'
Will soon shake your windows
And rattle your walls
For the times they are a-changin'
Come mothers and fathers
Throughout the land
And don't criticize
What you can't understand
Your sons and your daughters
Are beyond your command
Your old road is rapidly agin'
Please get out of the new one
If you can't lend your hand
For the times they are a-changin'
The line it is drawn
The curse it is cast
The slow one now
Will later be fast
As the present now
Will later be past
The order is rapidly fadin'
And the first one now
Will later be last
For the times they are a-changin'

When in the chronicle of wasted time
I see descriptions of the fairest wights,
And beauty making beautiful old rhyme
In praise of ladies dead, and lovely knights,
Then, in the blazon of sweet beauty’s best,
Of hand, of foot, of lip, of eye, of brow,
I see their antique pen would have express’d
Even such a beauty as you master now.
So all their praises are but prophecies
Of this our time, all you prefiguring;
And, for they look’d but with divining eyes,
They had not skill enough your worth to sing:
For we, which now behold these present days,
Had eyes to wonder, but lack tongues to praise.

I am a sick man.... I am a spiteful man. I am an unattractive man. I believe my liver is diseased. However, I know nothing at all about my disease, and do not know for certain what ails me. I don’t consult a doctor for it, and never have, though I have a respect for medicine and doctors. Besides, I am extremely superstitious, sufficiently so to respect medicine, anyway (I am well-educated enough not to be superstitious, but I am superstitious). No, I refuse to consult a doctor from spite. That you probably will not understand. Well, I understand it, though. Of course, I can’t explain who it is precisely that I am mortifying in this case by my spite: I am perfectly well aware that I cannot “pay out” the doctors by not consulting them; I know better than anyone that by all this I am only injuring myself and no one else. But still, if I don’t consult a doctor it is from spite. My liver is bad, well—let it get worse!

I have been going on like that for a long time—twenty years. Now I am forty. I used to be in the government service, but am no longer. I was a spiteful official. I was rude and took pleasure in being so. I did not take bribes, you see, so I was bound to find a recompense in that, at least. (A poor jest, but I will not scratch it out. I wrote it thinking it would sound very witty; but now that I have seen myself that I only wanted to show off in a despicable way, I will not scratch it out on purpose!)

When petitioners used to come for information to the table at which I sat, I used to grind my teeth at them, and felt intense enjoyment when I succeeded in making anybody unhappy. I almost did succeed. For the most part they were all timid people—of course, they were petitioners. But of the uppish ones there was one officer in particular I could not endure. He simply would not be humble, and clanked his sword in a disgusting way. I carried on a feud with him for eighteen months over that sword. At last I got the better of him. He left off clanking it. That happened in my youth, though.

But do you know, gentlemen, what was the chief point about my spite? Why, the whole point, the real sting of it lay in the fact that continually, even in the moment of the acutest spleen, I was inwardly conscious with shame that I was not only not a spiteful but not even an embittered man, that I was simply scaring sparrows at random and amusing myself by it. I might foam at the mouth, but bring me a doll to play with, give me a cup of tea with sugar in it, and maybe I should be appeased. I might even be genuinely touched, though probably I should grind my teeth at myself afterwards and lie awake at night with shame for months after. That was my way.

I was lying when I said just now that I was a spiteful official. I was lying from spite. I was simply amusing myself with the petitioners and with the officer, and in reality I never could become spiteful. I was conscious every moment in myself of many, very many elements absolutely opposite to that. I felt them positively swarming in me, these opposite elements. I knew that they had been swarming in me all my life and craving some outlet from me, but I would not let them, would not let them, purposely would not let them come out. They tormented me till I was ashamed: they drove me to convulsions and—sickened me, at last, how they sickened me! Now, are not you fancying, gentlemen, that I am expressing remorse for something now, that I am asking your forgiveness for something? I am sure you are fancying that ... However, I assure you I do not care if you are....

It was not only that I could not become spiteful, I did not know how to become anything; neither spiteful nor kind, neither a rascal nor an honest man, neither a hero nor an insect. Now, I am living out my life in my corner, taunting myself with the spiteful and useless consolation that an intelligent man cannot become anything seriously, and it is only the fool who becomes anything. Yes, a man in the nineteenth century must and morally ought to be pre-eminently a characterless creature; a man of character, an active man is pre-eminently a limited creature. That is my conviction of forty years. I am forty years old now, and you know forty years is a whole lifetime; you know it is extreme old age. To live longer than forty years is bad manners, is vulgar, immoral. Who does live beyond forty? Answer that, sincerely and honestly I will tell you who do: fools and worthless fellows. I tell all old men that to their face, all these venerable old men, all these silver-haired and reverend seniors! I tell the whole world that to its face! I have a right to say so, for I shall go on living to sixty myself. To seventy! To eighty! ... Stay, let me take breath ...

You imagine no doubt, gentlemen, that I want to amuse you. You are mistaken in that, too. I am by no means such a mirthful person as you imagine, or as you may imagine; however, irritated by all this babble (and I feel that you are irritated) you think fit to ask me who I am—then my answer is, I am a collegiate assessor. I was in the service that I might have something to eat (and solely for that reason), and when last year a distant relation left me six thousand roubles in his will I immediately retired from the service and settled down in my corner. I used to live in this corner before, but now I have settled down in it. My room is a wretched, horrid one in the outskirts of the town. My servant is an old country-woman, ill-natured from stupidity, and, moreover, there is always a strange smell about her. I am told that the Petersburg climate is bad for me, and that with my small means it is very expensive to live in Petersburg. I know all that better than all these sage and experienced counsellors and monitors.... But I am remaining in Petersburg; I am not going away from Petersburg! I am not going away because ... ech! Why, it is absolutely no matter whether I am going away or not going away.

But what can a decent man speak of with most pleasure?

Answer: Of himself.

Well, so I will talk about myself.
The missile knows where it is at all times. It knows this because it knows where it isn't. By subtracting where it is from where it isn't, or where it isn't from where it is (whichever is greater), it obtains a difference, or deviation. The guidance subsystem uses deviations to generate corrective commands to drive the missile from a position where it is to a position where it isn't, and arriving at a position where it wasn't, it now is. Consequently, the position where it is, is now the position that it wasn't, and it follows that the position that it was, is now the position that it isn't.
In the event that the position that it is in is not the position that it wasn't, the system has acquired a variation, the variation being the difference between where the missile is, and where it wasn't. If variation is considered to be a significant factor, it too may be corrected by the GEA. However, the missile must also know where it was.
The missile guidance computer scenario works as follows. Because a variation has modified some of the information the missile has obtained, it is not sure just where it is. However, it is sure where it isn't, within reason, and it knows where it was. It now subtracts where it should be from where it wasn't, or vice-versa, and by differentiating this from the algebraic sum of where it shouldn't be, and where it was, it is able to obtain the deviation and its variation, which is called error.
The FitnessGram™ Pacer Test is a multistage aerobic capacity test that progressively gets more difficult as it continues. The 20 meter pacer test will begin in 30 seconds. Line up at the start. The running speed starts slowly, but gets faster each minute after you hear this signal. [beep] A single lap should be completed each time you hear this sound. [ding] Remember to run in a straight line, and run as long as possible. The second time you fail to complete a lap before the sound, your test is over. The test will begin on the word start. On your mark, get ready, start.
To be fair, you have to have a very high IQ to understand Rick and Morty. The humour is extremely subtle, and without a solid grasp of theoretical physics most of the jokes will go over a typical viewers head. There's also Rick's nihilistic outlook, which is deftly woven into his characterisation- his personal philosophy draws heavily from Narodnaya Volya literature, for instance. The fans understand this stuff; they have the intellectual capacity to truly appreciate the depths of these jokes, to realise that they're not just funny- they say something deep about LIFE. As a consequence people who dislike Rick & Morty truly ARE idiots- of course they wouldn't appreciate, for instance, the humour in Rick's existential catchphrase "Wubba Lubba Dub Dub," which itself is a cryptic reference to Turgenev's Russian epic Fathers and Sons. I'm smirking right now just imagining one of those addlepated simpletons scratching their heads in confusion as Dan Harmon's genius wit unfolds itself on their television screens. What fools.. how I pity them. And yes, by the way, i DO have a Rick & Morty tattoo. And no, you cannot see it. It's for the ladies' eyes only- and even then they have to demonstrate that they're within 5 IQ points of my own (preferably lower) beforehand. Nothin personnel kid 
Did you ever hear the tragedy of Darth Plagueis "the wise"? I thought not. It's not a story the Jedi would tell you. It's a Sith legend. Darth Plagueis was a Dark Lord of the Sith, so powerful and so wise he could use the Force to influence the midichlorians to create life... He had such a knowledge of the dark side that he could even keep the ones he cared about from dying. The dark side of the Force is a pathway to many abilities some consider to be unnatural. He became so powerful... the only thing he was afraid of was losing his power, which eventually, of course, he did. Unfortunately, he taught his apprentice everything he knew, then his apprentice killed him in his sleep. It's ironic he could save others from death, but not himself.

There's a lady who's sure all that glitters is gold
And she's buying a stairway to Heaven
When she gets there she knows, if the stores are all closed
With a word she can get what she came for
Ooh, ooh, and she's buying a stairway to Heaven
There's a sign on the wall, but she wants to be sure
'Cause you know sometimes words have two meanings
In a tree by the brook, there's a songbird who sings
Sometimes all of our thoughts are misgiven
Ooh, it makes me wonder
Ooh, makes me wonder
There's a feeling I get when I look to the West
And my spirit is crying for leaving
In my thoughts I have seen rings of smoke through the trees
And the voices of those who stand looking
Ooh, it makes me wonder
Ooh, really makes me wonder
And it's whispered that soon if we all call the tune
Then the piper will lead us to reason
And a new day will dawn for those who stand long
And the forests will echo with laughter
Oh-oh-oh-oh-whoa
If there's a bustle in your hedgerow, don't be alarmed now
It's just a spring clean for the May queen
Yes, there are two paths you can go by, but in the long run
There's still time to change the road you're on
And it makes me wonder
Ohh, whoa
Your head is humming, and it won't go, in case you don't know
The piper's calling you to join him
Dear lady, can you hear the wind blow? And did you know
Your stairway lies on the whispering wind?
And as we wind on down the road
Our shadows taller than our soul
There walks a lady we all know
Who shines white light and wants to show
How everything still turns to gold
And if you listen very hard
The tune will come to you at last
When all are one, and one is all
To be a rock and not to roll
And she's buying a stairway to Heaven

We built this city
We built this city on rock and roll
Built this city
We built this city on rock and roll
Say you don't know me or recognize my face
Say you don't care who goes to that kind of place
Knee deep in the hoopla, sinking in your fight
Too many runaways eating up the night
Marconi plays the mamba, listen to the radio, don't you remember?
We built this city, we built this city on rock and roll
We built this city, we built this city on rock and roll
Built this city, we built this city on rock and roll
Someone's always playing corporation games
Who cares, they're always changing corporation names
We just want to dance here, someone stole the stage
They call us irresponsible, write us off the page
Marconi plays the mamba, listen to the radio, don't you remember?
We built this city, we built this city on rock and roll
We built this city, we built this city on rock and roll
Built this city, we built this city on rock and roll
It's just another Sunday in a tired old street
Police have got the choke hold, oh, then we just lost the beat
Who counts the money underneath the bar?
Who rides the wrecking ball into our guitars?
Don't tell us you need us 'cause we're the ship of fools
Looking for America, coming through your schools
Don't you remember? (Remember)
Marconi plays the mamba, listen to the radio, don't you remember?
We built this city, we built this city on rock and roll
We built this city, we built this city on rock and roll
Built this city, we built this city on rock and roll
Built this city, we built this city on rock and roll
Built this city, we built this city on rock and roll
We built, we built this city, yeah (Built this city)
We built, we built this city
We built, we built this city yeah (Built this city)
We built, we built this city
We built, we built this city yeah (Built this city)
We built, we built this city (Built this city)


Party rock is in the house tonight
Everybody just have a good time (yeah)
And we gonna make you lose your mind (woo)
Everybody just have a good time (clap)
Party rock is in the house tonight (oh)
Everybody just have a good time (I can feel this sh- baby)
And we gonna make you lose your mind (yeah)
We just wanna see you
Shake that
Shake that
(Everyday I'm shufflin')
Move your body out on the floor
Put your troubles aside and start living
Anybody can let it go
Throw away all your problems
'Cause right now it's party time
Girl, don't feel outta place 'cause I
I'm in love with this feeling now
And I, I, I hope that this will last a while
We should make it last a while
Party rock is in the house tonight (woo)
Everybody just have a good time (yeah)
And we gonna make you lose your mind
Everybody just have a good time (let's go)
Party rock is in the house tonight
Everybody just have a good time
And we gonna make you lose your mind
We just wanna see you
Shake that
Everyday I'm shufflin'
You love to drink? (Yeah)
So do we (yeah)
Get more bottles (yeah)
Bring 'em to me (yeah)
Hold your glasses up, people everywhere
Now everybody put your hands in the air
Say yeah, yeah, yeah
Girl, I wanna, yeah, yeah, yeah
I wanna see you tonight
Yeah, yeah, yeah
Girl, I gotta, yeah, yeah, yeah
I gotta see you tonight
Oh-oh-oh, oh-whoa-oh-oh
Oh-oh-oh, let me see your hands
Oh-oh-oh, oh-whoa-oh-oh
Oh-oh-oh, tonight is the night
Party rock is in the house tonight
Everybody just have a good time (yeah)
And we gonna make you lose your mind
Everybody just have a good-good-good time
You love to drink? (Yeah)
So do we (yeah)
Get more bottles (yeah)
Bring 'em to me (yeah)
Hold your glasses up, people everywhere
Now everybody put your hands in the air
Say yeah, yeah, yeah
Girl, I wanna, yeah, yeah, yeah
I wanna see you tonight
Yeah, yeah, yeah
Girl, I gotta, yeah, yeah, yeah
I gotta see you tonight
Oh-oh-oh, oh-whoa-oh-oh
Oh-oh-oh, let me see your hands (put yo', put yo')
Oh-oh-oh, oh-whoa-oh-oh
Oh-oh-oh, tonight is the night
Put your hands up`



function generateMarkovChain(text, order = 2) {
    const words = text.split(" ");
    const chain = {};

    for (let i = 0; i < words.length - order; i++) {
        const current_state = words.slice(i, i + order).join(" ");
        const next_word = words[i + order];

        if (chain[current_state]) {
            chain[current_state].push(next_word);
        } else {
            chain[current_state] = [next_word];
        }
    }

    return chain;
}

function generateLyrics(chain, starting_state, length, switch_frequency = 20) {
    let current_state = starting_state.split(" ");
    let lyrics = current_state.slice();

    let word_count = current_state.length;
    while (word_count < length) {
        if (chain[current_state.join(" ")]) {
            const next_word = chain[current_state.join(" ")][Math.floor(Math.random() * chain[current_state.join(" ")].length)];
            lyrics.push(next_word);
            current_state = lyrics.slice(-current_state.length);
            word_count++;

            if (word_count % Math.floor(Math.random() * 7 + 9) === 0) {
                if (lyrics[lyrics.length - 1] === " ") {
                    lyrics.pop();
                }
                lyrics.push("\n");
            }

            if (word_count % switch_frequency === 0) {
                current_state = Object.keys(chain)[Math.floor(Math.random() * Object.keys(chain).length)].split(" ");
            }
        } else {
            current_state = Object.keys(chain)[Math.floor(Math.random() * Object.keys(chain).length)].split(" ");
        }
    }

    if (lyrics[0] === " ") {
        lyrics.shift();
    }

    return lyrics.join(" ");
}

function generateSongStructure(numVerses, numChoruses, chain, startingStates) {
    let songStructure = "";

    // Generate chorus lyrics (a single set to be reused)
    const chorusLyrics = addChordsToLyrics(generateLyrics(chain, startingStates[numVerses], 30, 20));

    // Add verses and choruses dynamically based on num_verses and num_choruses
    let verseIndex = 0;
    let chorusIndex = 0;
    for (let i = 0; i < numVerses + numChoruses; i++) {
        if (verseIndex < numVerses) {
            const verseLyrics = generateLyrics(chain, startingStates[verseIndex], 50, 20);
            const verseWithChords = addChordsToLyrics(verseLyrics);
            songStructure += `Verse ${verseIndex + 1}:\n${verseWithChords}\n\n`;
            verseIndex++;
        }

        if (chorusIndex < numChoruses) {
            songStructure += `Chorus ${chorusIndex + 1}:\n${chorusLyrics}\n\n`;
            chorusIndex++;
        }
    }

    return songStructure;
}

function addChordsToLyrics(lyrics) {
    const chords = [
        "C", "D", "E", "F", "G", "A", "B",  // Add more chords as needed
        "Cm", "Dm", "Em", "Fm", "Gm", "Am", "Bm",  // Minor chords
        "C7", "D7", "E7", "F7", "G7", "A7", "B7",  // Dominant 7th chords
        "Cmaj7", "Dmaj7", "Emaj7", "Fmaj7", "Gmaj7", "Amaj7", "Bmaj7",  // Major 7th chords
        "Cm7", "Dm7", "Em7", "Fm7", "Gm7", "Am7", "Bm7",  // Minor 7th chords
        "Cdim", "Ddim", "Edim", "Fdim", "Gdim", "Adim", "Bdim",  // Diminished chords
        "Caug", "Daug", "Eaug", "Faug", "Gaug", "Aaug", "Baug",  // Augmented chords
        "Csus2", "Dsus2", "Esus2", "Fsus2", "Gsus2", "Asus2", "Bsus2",  // Suspended 2nd chords
        "Csus4", "Dsus4", "Esus4", "Fsus4", "Gsus4", "Asus4", "Bsus4",  // Suspended 4th chords
        // Add more chords as needed
    ];

    // Randomly select two 4-chord loops from the chord list
    const loop1 = chords.slice().sort(() => Math.random() - 0.5).slice(0, 4);
    const loop2 = chords.slice().sort(() => Math.random() - 0.5).slice(0, 4);

    // Combine the two loops to create the alternating chord sequence
    const combinedChordLoop = loop1.concat(loop2);

    // Split lyrics into lines
    const lyricsLines = lyrics.split('\n');

    // Create lyrics with alternating chord lines
    const lyricsWithChords = [];
    for (let i = 0; i < lyricsLines.length; i++) {
        // Get the corresponding chord from the combined loop
        const chordIndex = i % combinedChordLoop.length;
        const chord = combinedChordLoop[chordIndex].padEnd(10); // Align chords for consistent formatting

        // Add chord line followed by lyrics line
        lyricsWithChords.push(chord);
        lyricsWithChords.push(lyricsLines[i]);
    }

    // Return the lyrics with chords as a single text variable
    return lyricsWithChords.join('\n');
}

function generateSong(numVerses, numChoruses) {
    // Read lyrics text from file
    const lyricsText = LYRICS;

    const chain = generateMarkovChain(lyricsText.toLowerCase());
    const startingStates = Array.from({ length: numVerses + numChoruses }, () => {
        return Object.keys(chain)[Math.floor(Math.random() * Object.keys(chain).length)];
    });

    const generatedSong = generateSongStructure(numVerses, numChoruses, chain, startingStates);
    document.getElementById('lyrics').innerHTML = generatedSong.replace(/\n/g, "<br>"); // Replace newline characters with <br> tags
}